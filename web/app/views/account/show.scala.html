@(account: org.svomz.apps.finances.core.application.AccountProjection,
    transactions: List[org.svomz.apps.finances.core.application.TransactionListItemProjection],
    balances: List[(String, BigDecimal)])(implicit flash: Flash)

@import views.helpers.AccountHelper._

@main("show") {
    <h2><a href="@controllers.routes.AccountController.index">Accounts</a> - <span>@account.name</span> <a href="@controllers.routes.AccountController.edit(account.accountId)"><span class="glyphicon glyphicon-pencil account-edit-btn" aria-hidden="true"></span></a></h2>
    <p><strong>Actual balance:</strong> <span class="@transactionAmountClassOf(account.balance)">@account.balance</span></p>

    <div class="panel panel-default">
        <div class="panel-heading"><h3 class="panel-title">Transactions</h3></div>
            <div class="panel-body">
                <div class="btn-group pull-right">
                    <a href="@controllers.routes.TransactionController.add(account.accountId)" class="btn btn-success">Add</a>
                    <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="caret"></span>
                        <span class="sr-only">Toggle Dropdown</span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="@routes.TransactionController.addBulk(account.accountId)">Bulk</a></li>
                    </ul>
                </div>
                <table class="table table-hover table-condensed transactions transactions-table">
                    <thead>
                    <tr>
                        <th class="transactions-table-date">Date</th>
                        <th class="transactions-table-value">Amount</th>
                        <th class="transactions-table-balance">Balance</th>
                        <th class="transactions-table-description">Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    @for(transaction <- transactions) {
                    <tr>
                        <td>@formatDate(transaction.date)</td>
                        <td><span class="@transactionAmountClassOf(transaction.amount)">@transaction.amount</span></td>
                        <td><span class="@transactionAmountClassOf(transaction.balance)">@transaction.balance</span></td>
                        <td>@transaction.descriptionOption.getOrElse("")</td>
                        <td>
                            @if(!transaction.categoryOption.isEmpty) {
                                <span class="label label-primary">@transaction.categoryOption.get</span></a>
                            }
                        </td>
                        <td>
                            <a class="pull-right" href="@controllers.routes.TransactionController.delete(account.accountId, transaction.transactionId)"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
                            <a class="pull-right" href="@controllers.routes.TransactionController.update(account.accountId, transaction.transactionId)"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
                        </td>
                    </tr>
                    }
                    </tbody>
                </table>
            </div>
    </div>
}